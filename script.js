// Language translations
const translations = {
    en: {
        nav: {
            home: "Home",
            about: "About",
            tours: "Tours",
            reviews: "Reviews",
            faq: "FAQ",
            contact: "Contact"
        },
        hero: {
            title: "Discover the beauty of Russia and Central Asia",
            description: "Professional tours with an experienced guide to the most interesting corners of our planet. From Moscow to Tashkent — your dream journey begins here.",
            chooseTour: "Choose Tour",
            learnMore: "Learn More"
        },
        about: {
            title: "About Us",
            subtitle: "Your guide to unforgettable journeys",
            greeting: "Hello! My name is [Your Name]",
            description: "I am a professional guide with more than 10 years of experience organizing tours to Russia and Central Asian countries. My passion for travel and deep knowledge of cultural characteristics of the regions help create unique routes.",
            tours: "Successfully conducted journeys",
            tourists: "Satisfied customers",
            rating: "Average tour rating"
        },
        tours: {
            title: "Our Tours",
            subtitle: "Choose your next adventure destination",
            russia: "Russia",
            centralAsia: "Central Asia",
            popular: "Popular",
            learnMore: "Learn More",
            moscow: {
                title: "Moscow - Heart of Russia",
                description: "Red Square, Kremlin, Tretyakov Gallery and much more. Immerse yourself in the history and culture of the capital.",
                days: "5 days",
                people: "Up to 12 people",
                price: "From $400"
            },
            petersburg: {
                title: "St. Petersburg - Cultural Capital",
                description: "Hermitage, Peterhof, white nights. The romantic atmosphere of the Northern Venice awaits you.",
                days: "6 days",
                people: "Up to 10 people",
                price: "From $450"
            },
            kazan: {
                title: "Kazan - City of Contrasts",
                description: "Kul Sharif Mosque, Kazan Kremlin, thousand-year history. Unique fusion of cultures.",
                days: "4 days",
                people: "Up to 15 people",
                price: "From $290"
            },
            murmansk: {
                title: "Murmansk - Land of Northern Lights",
                description: "Northern lights, northern coast, nuclear icebreaker. Unique Arctic expedition.",
                days: "7 days",
                people: "Up to 8 people",
                price: "From $560"
            },
            dagestan: {
                title: "Dagestan - Land of Mountains and Traditions",
                description: "Ancient Derbent, Sulak Canyon, mountain villages. Rich culture and stunning nature of the Caucasus.",
                days: "6 days",
                people: "Up to 10 people",
                price: "From $480"
            },
            chechnya: {
                title: "Chechnya - Heart of the Caucasus",
                description: "Grozny, Argun Gorge, ancient towers. Modern architecture meets ancient traditions.",
                days: "5 days",
                people: "Up to 12 people",
                price: "From $420"
            },
            kazakhstan: {
                title: "Kazakhstan - Great Steppe",
                description: "Almaty, Astana, endless steppes and modern cities. Intersection of traditions and innovations.",
                days: "8 days",
                people: "Up to 12 people",
                price: "From $720",
                country: "Kazakhstan"
            },
            kyrgyzstan: {
                title: "Kyrgyzstan - Land of Heavenly Mountains",
                description: "Issyk-Kul, Bishkek, nomadic culture. Natural beauty and ancient traditions.",
                days: "10 days",
                people: "Up to 10 people",
                price: "From $670",
                country: "Kyrgyzstan"
            },
            uzbekistan: {
                title: "Uzbekistan - Pearl of the Silk Road",
                description: "Samarkand, Bukhara, Khiva. Ancient cities with rich history and stunning architecture.",
                days: "9 days",
                people: "Up to 14 people",
                price: "From $610",
                country: "Uzbekistan"
            }
        },
        faq: {
            title: "Frequently Asked Questions",
            subtitle: "Everything you need to know about our tours",
            q1: {
                question: "What is included in the tour price?",
                answer: "The price includes: accommodation in 3-4* hotels, meals (breakfasts, some lunches), transportation, guide services, entrance tickets to museums and attractions, medical insurance."
            },
            q2: {
                question: "What is the group size?",
                answer: "We work with small groups of 6 to 15 people, which ensures an individual approach to each tourist and a comfortable atmosphere."
            },
            q3: {
                question: "What documents are needed for the trip?",
                answer: "For tours in Russia: Russian passport. For Central Asia: international passport (valid for at least 6 months), visa (if required). We will help with the preparation of all necessary documents."
            },
            q4: {
                question: "Can the tour program be changed?",
                answer: "Yes, we are always ready to adapt the program to your wishes and interests. Discuss this in advance, and we will make the necessary changes."
            },
            q5: {
                question: "What to do if the weather gets bad?",
                answer: "We always have backup options for bad weather. We visit museums, covered attractions, or change the route to one more suitable for current conditions."
            }
        },
        contact: {
            title: "Contact Us",
            subtitle: "Ready to embark on a journey? Let's discuss the details!",
            phone: "Phone",
            email: "Email",
            address: "Address"
        },
        footer: {
            description: "Professional tours to Russia and Central Asia",
            destinations: "Destinations",
            contacts: "Contacts",
            copyright: "© 2024 TravelExpert. All rights reserved."
        }
    },
    id: {
        nav: {
            home: "Beranda",
            about: "Tentang",
            tours: "Tur",
            reviews: "Ulasan",
            faq: "FAQ",
            contact: "Kontak"
        },
        hero: {
            title: "Temukan keindahan Rusia dan Asia Tengah",
            description: "Tur profesional dengan pemandu berpengalaman ke sudut-sudut paling menarik di planet kita. Dari Moskow hingga Tashkent — perjalanan impian Anda dimulai di sini.",
            chooseTour: "Pilih Tur",
            learnMore: "Pelajari Lebih Lanjut"
        },
        about: {
            title: "Tentang Kita",
            subtitle: "Pemandu Anda untuk perjalanan yang tak terlupakan",
            greeting: "Halo! Nama saya [Nama Anda]",
            description: "Saya adalah pemandu profesional dengan pengalaman lebih dari 10 tahun mengorganisir tur ke Rusia dan negara-negara Asia Tengah. Passion saya untuk bepergian dan pengetahuan mendalam tentang karakteristik budaya daerah membantu menciptakan rute yang unik.",
            tours: "Perjalanan yang berhasil dilakukan",
            tourists: "Pelanggan yang puas",
            rating: "Rating tur rata-rata"
        },
        tours: {
            title: "Tur Kami",
            subtitle: "Pilih destinasi petualangan berikutnya Anda",
            russia: "Rusia",
            centralAsia: "Asia Tengah",
            popular: "Populer",
            learnMore: "Pelajari Lebih Lanjut",
            moscow: {
                title: "Moskow - Jantung Rusia",
                description: "Lapangan Merah, Kremlin, Galeri Tretyakov dan banyak lagi. Tenggelamkan diri dalam sejarah dan budaya ibu kota.",
                days: "5 hari",
                people: "Hingga 12 orang",
                price: "Mulai dari $400"
            },
            petersburg: {
                title: "St. Petersburg - Ibu Kota Budaya",
                description: "Hermitage, Peterhof, malam putih. Atmosfer romantis Venesia Utara menanti Anda.",
                days: "6 hari",
                people: "Hingga 10 orang",
                price: "Mulai dari $450"
            },
            kazan: {
                title: "Kazan - Kota Kontras",
                description: "Masjid Kul Sharif, Kremlin Kazan, sejarah seribu tahun. Perpaduan budaya yang unik.",
                days: "4 hari",
                people: "Hingga 15 orang",
                price: "Mulai dari $290"
            },
            murmansk: {
                title: "Murmansk - Tanah Cahaya Utara",
                description: "Cahaya utara, pantai utara, kapal pemecah es nuklir. Ekspedisi Arktik yang unik.",
                days: "7 hari",
                people: "Hingga 8 orang",
                price: "Mulai dari $560"
            },
            dagestan: {
                title: "Dagestan - Tanah Gunung dan Tradisi",
                description: "Derbent kuno, Ngarai Sulak, desa-desa pegunungan. Budaya kaya dan alam menakjubkan Kaukasus.",
                days: "6 hari",
                people: "Hingga 10 orang",
                price: "Mulai dari $480"
            },
            chechnya: {
                title: "Chechnya - Jantung Kaukasus",
                description: "Grozny, Ngarai Argun, menara kuno. Arsitektur modern bertemu tradisi kuno.",
                days: "5 hari",
                people: "Hingga 12 orang",
                price: "Mulai dari $420"
            },
            kazakhstan: {
                title: "Kazakhstan - Stepa Besar",
                description: "Almaty, Astana, stepa tak berujung dan kota-kota modern. Persimpangan tradisi dan inovasi.",
                days: "8 hari",
                people: "Hingga 12 orang",
                price: "Mulai dari $720",
                country: "Kazakhstan"
            },
            kyrgyzstan: {
                title: "Kyrgyzstan - Tanah Gunung Surga",
                description: "Issyk-Kul, Bishkek, budaya nomaden. Keindahan alam dan tradisi kuno.",
                days: "10 hari",
                people: "Hingga 10 orang",
                price: "Mulai dari $670",
                country: "Kyrgyzstan"
            },
            uzbekistan: {
                title: "Uzbekistan - Mutiara Jalur Sutra",
                description: "Samarkand, Bukhara, Khiva. Kota-kota kuno dengan sejarah kaya dan arsitektur menakjubkan.",
                days: "9 hari",
                people: "Hingga 14 orang",
                price: "Mulai dari $610",
                country: "Uzbekistan"
            }
        },
        faq: {
            title: "Pertanyaan yang Sering Diajukan",
            subtitle: "Semua yang perlu Anda ketahui tentang tur kami",
            q1: {
                question: "Apa yang termasuk dalam harga tur?",
                answer: "Harga termasuk: akomodasi di hotel 3-4*, makanan (sarapan, beberapa makan siang), transportasi, layanan pemandu, tiket masuk ke museum dan atraksi, asuransi kesehatan."
            },
            q2: {
                question: "Berapa ukuran grup?",
                answer: "Kami bekerja dengan grup kecil 6 hingga 15 orang, yang memastikan pendekatan individual untuk setiap wisatawan dan suasana yang nyaman."
            },
            q3: {
                question: "Dokumen apa yang diperlukan untuk perjalanan?",
                answer: "Untuk tur di Rusia: paspor Rusia. Untuk Asia Tengah: paspor internasional (berlaku minimal 6 bulan), visa (jika diperlukan). Kami akan membantu persiapan semua dokumen yang diperlukan."
            },
            q4: {
                question: "Bisakah program tur diubah?",
                answer: "Ya, kami selalu siap menyesuaikan program sesuai keinginan dan minat Anda. Diskusikan ini terlebih dahulu, dan kami akan membuat perubahan yang diperlukan."
            },
            q5: {
                question: "Apa yang harus dilakukan jika cuaca memburuk?",
                answer: "Kami selalu memiliki opsi cadangan untuk cuaca buruk. Kami mengunjungi museum, atraksi tertutup, atau mengubah rute ke yang lebih sesuai dengan kondisi saat ini."
            }
        },
        contact: {
            title: "Hubungi Kami",
            subtitle: "Siap untuk memulai perjalanan? Mari kita diskusikan detailnya!",
            phone: "Telepon",
            email: "Email",
            address: "Alamat"
        },
        footer: {
            description: "Tur profesional ke Rusia dan Asia Tengah",
            destinations: "Destinasi",
            contacts: "Kontak",
            copyright: "© 2024 TravelExpert. Hak cipta dilindungi."
        }
    }
};

// Language switching functionality
let currentLang = localStorage.getItem('language') || 'en';

function setLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('language', lang);
    document.documentElement.setAttribute('lang', lang);
    const htmlLang = document.getElementById('html-lang');
    if (htmlLang) {
        htmlLang.setAttribute('lang', lang);
    }
    
    // Update active button
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.getAttribute('data-lang') === lang) {
            btn.classList.add('active');
        }
    });
    
    // Translate all elements
    document.querySelectorAll('[data-translate]').forEach(element => {
        const key = element.getAttribute('data-translate');
        const keys = key.split('.');
        let translation = translations[lang];
        
        for (let k of keys) {
            if (translation && translation[k]) {
                translation = translation[k];
            } else {
                translation = null;
                break;
            }
        }
        
        if (translation) {
            element.textContent = translation;
        }
    });
    
    // Update meta description
    const metaDescription = document.querySelector('meta[name="description"]');
    if (metaDescription) {
        if (lang === 'en') {
            metaDescription.content = "Unique tours to Russia, Kazakhstan, Kyrgyzstan and Uzbekistan. Professional guides, interesting routes, unforgettable experiences.";
        } else {
            metaDescription.content = "Tur unik ke Rusia, Kazakhstan, Kyrgyzstan dan Uzbekistan. Pemandu profesional, rute menarik, pengalaman tak terlupakan.";
        }
    }
    
    // Update page title
    if (lang === 'en') {
        document.title = "Tours to Russia and Central Asia | Professional Travel Services";
    } else {
        document.title = "Tur ke Rusia dan Asia Tengah | Layanan Perjalanan Profesional";
    }
}

// Initialize language on page load
document.addEventListener('DOMContentLoaded', function() {
    setLanguage(currentLang);
    
    // Language switcher buttons
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const lang = this.getAttribute('data-lang');
            setLanguage(lang);
        });
    });
});

// Mobile Navigation Toggle
document.addEventListener('DOMContentLoaded', function() {
    const hamburger = document.querySelector('.hamburger');
    const navMenu = document.querySelector('.nav-menu');
    const navLinks = document.querySelectorAll('.nav-link');

    // Toggle mobile menu
    hamburger.addEventListener('click', function() {
        hamburger.classList.toggle('active');
        navMenu.classList.toggle('active');
    });

    // Close mobile menu when clicking on a link
    navLinks.forEach(link => {
        link.addEventListener('click', function() {
            hamburger.classList.remove('active');
            navMenu.classList.remove('active');
        });
    });

    // Close mobile menu when clicking outside
    document.addEventListener('click', function(event) {
        if (!hamburger.contains(event.target) && !navMenu.contains(event.target)) {
            hamburger.classList.remove('active');
            navMenu.classList.remove('active');
        }
    });
});

// Smooth scrolling for navigation links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            const headerHeight = document.querySelector('.header').offsetHeight;
            const targetPosition = target.offsetTop - headerHeight;
            
            window.scrollTo({
                top: targetPosition,
                behavior: 'smooth'
            });
        }
    });
});

// FAQ Accordion
document.addEventListener('DOMContentLoaded', function() {
    const faqItems = document.querySelectorAll('.faq-item');
    
    faqItems.forEach(item => {
        const question = item.querySelector('.faq-question');
        
        question.addEventListener('click', function() {
            // Close other open items
            faqItems.forEach(otherItem => {
                if (otherItem !== item) {
                    otherItem.classList.remove('active');
                }
            });
            
            // Toggle current item
            item.classList.toggle('active');
        });
    });
});

// Header scroll effect
window.addEventListener('scroll', function() {
    const header = document.querySelector('.header');
    if (window.scrollY > 100) {
        header.style.background = 'rgba(255, 255, 255, 0.98)';
        header.style.boxShadow = '0 2px 20px rgba(0, 0, 0, 0.15)';
    } else {
        header.style.background = 'rgba(255, 255, 255, 0.95)';
        header.style.boxShadow = '0 2px 20px rgba(0, 0, 0, 0.1)';
    }
});

// Intersection Observer for animations
const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
};

const observer = new IntersectionObserver(function(entries) {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.style.opacity = '1';
            entry.target.style.transform = 'translateY(0)';
        }
    });
}, observerOptions);

// Observe elements for animation
document.addEventListener('DOMContentLoaded', function() {
    const animateElements = document.querySelectorAll('.tour-card, .review-card, .experience-item');
    
    animateElements.forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(30px)';
        el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(el);
    });
});

// Form validation and submission
document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('.contact-form form');
    
    if (form) {
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form data
            const formData = new FormData(form);
            const name = formData.get('entry.123456789');
            const email = formData.get('entry.987654321');
            const phone = formData.get('entry.555666777');
            const tour = formData.get('entry.111222333');
            const message = formData.get('entry.444555666');
            
            // Basic validation
            if (!name || !email || !tour) {
                alert('Please fill in all required fields');
                return;
            }
            
            // Email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('Please enter a valid email address');
                return;
            }
            
            // Show success message
            const submitBtn = form.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            
            submitBtn.textContent = 'Sending...';
            submitBtn.disabled = true;
            
            // Simulate form submission (replace with actual Google Forms URL)
            setTimeout(() => {
                alert('Thank you for your request! We will contact you soon.');
                form.reset();
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            }, 2000);
        });
    }
});

// Tour card hover effects
document.addEventListener('DOMContentLoaded', function() {
    const tourCards = document.querySelectorAll('.tour-card');
    
    tourCards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-10px) scale(1.02)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) scale(1)';
        });
    });
});

// Counter animation for experience stats
function animateCounter(element, target, duration = 2000) {
    let start = 0;
    const increment = target / (duration / 16);
    
    function updateCounter() {
        start += increment;
        if (start < target) {
            element.textContent = Math.floor(start) + '+';
            requestAnimationFrame(updateCounter);
        } else {
            element.textContent = target + '+';
        }
    }
    
    updateCounter();
}

// Trigger counter animation when experience section is visible
const experienceObserver = new IntersectionObserver(function(entries) {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            const counters = entry.target.querySelectorAll('h4');
            counters.forEach((counter, index) => {
                const targets = [500, 2000, 5]; // 500+ tours, 2000+ tourists, 4.9/5
                setTimeout(() => {
                    if (index < 2) {
                        animateCounter(counter, targets[index]);
                    } else {
                        // For rating, just show the final value
                        counter.textContent = '4.9/5';
                    }
                }, index * 500);
            });
            experienceObserver.unobserve(entry.target);
        }
    });
}, { threshold: 0.5 });

document.addEventListener('DOMContentLoaded', function() {
    const experienceGrid = document.querySelector('.experience-grid');
    if (experienceGrid) {
        experienceObserver.observe(experienceGrid);
    }
});

// Parallax effect for hero section
window.addEventListener('scroll', function() {
    const scrolled = window.pageYOffset;
    const heroImg = document.querySelector('.hero-img');
    
    if (heroImg) {
        const rate = scrolled * -0.5;
        heroImg.style.transform = `translateY(${rate}px)`;
    }
});

// Loading animation
window.addEventListener('load', function() {
    document.body.style.opacity = '0';
    document.body.style.transition = 'opacity 0.5s ease';
    
    setTimeout(() => {
        document.body.style.opacity = '1';
    }, 100);
});

// Back to top button
const backToTopBtn = document.createElement('button');
backToTopBtn.innerHTML = '<i class="fas fa-arrow-up"></i>';
backToTopBtn.className = 'back-to-top';
backToTopBtn.style.cssText = `
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    z-index: 1000;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
`;

document.body.appendChild(backToTopBtn);

// Show/hide back to top button
window.addEventListener('scroll', function() {
    if (window.pageYOffset > 300) {
        backToTopBtn.style.opacity = '1';
        backToTopBtn.style.visibility = 'visible';
    } else {
        backToTopBtn.style.opacity = '0';
        backToTopBtn.style.visibility = 'hidden';
    }
});

// Back to top functionality
backToTopBtn.addEventListener('click', function() {
    window.scrollTo({
        top: 0,
        behavior: 'smooth'
    });
});

// Add hover effect to back to top button
backToTopBtn.addEventListener('mouseenter', function() {
    this.style.transform = 'translateY(-3px)';
    this.style.boxShadow = '0 6px 20px rgba(102, 126, 234, 0.6)';
});

backToTopBtn.addEventListener('mouseleave', function() {
    this.style.transform = 'translateY(0)';
    this.style.boxShadow = '0 4px 15px rgba(102, 126, 234, 0.4)';
});

// Social media link handlers (placeholder)
document.addEventListener('DOMContentLoaded', function() {
    const socialLinks = document.querySelectorAll('.social-link');
    
    socialLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const platform = this.querySelector('i').className;
            
            let url = '#';
            switch(true) {
                case platform.includes('telegram'):
                    url = 'https://t.me/your_telegram_username';
                    break;
                case platform.includes('whatsapp'):
                    url = 'https://wa.me/your_phone_number';
                    break;
                case platform.includes('instagram'):
                    url = 'https://instagram.com/your_instagram_username';
                    break;
                case platform.includes('vk'):
                    url = 'https://vk.com/your_vk_username';
                    break;
            }
            
            window.open(url, '_blank');
        });
    });
});

// Tour selection tracking
document.addEventListener('DOMContentLoaded', function() {
    const tourButtons = document.querySelectorAll('.tour-card .btn');
    
    tourButtons.forEach(button => {
        button.addEventListener('click', function(e) {
            const href = this.getAttribute('href');
            
            // If link doesn't start with #, allow normal navigation
            if (href && !href.startsWith('#')) {
                return; // Allow default link behavior
            }
            
            // Only prevent default for anchor links (#contact, etc.)
            e.preventDefault();
            const tourName = this.closest('.tour-card').querySelector('h4').textContent;
            
            // Pre-fill the form with selected tour
            const tourSelect = document.querySelector('select[name="entry.111222333"]');
            if (tourSelect) {
                const options = Array.from(tourSelect.options);
                const matchingOption = options.find(option => 
                    option.textContent.includes(tourName.split(' - ')[0])
                );
                if (matchingOption) {
                    tourSelect.value = matchingOption.value;
                }
            }
            
            // Scroll to contact form
            const contactSection = document.querySelector('#contact');
            if (contactSection) {
                const headerHeight = document.querySelector('.header').offsetHeight;
                const targetPosition = contactSection.offsetTop - headerHeight;
                
                window.scrollTo({
                    top: targetPosition,
                    behavior: 'smooth'
                });
            }
        });
    });
});
